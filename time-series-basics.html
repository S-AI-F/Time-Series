<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Time series basics | Time Series with R</title>
  <meta name="description" content="This is a tutorial of time series analysis with R." />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Time series basics | Time Series with R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a tutorial of time series analysis with R." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Time series basics | Time Series with R" />
  
  <meta name="twitter:description" content="This is a tutorial of time series analysis with R." />
  

<meta name="author" content="Saif Shabou" />


<meta name="date" content="2020-12-10" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="arma-time-series-modeling.html"/>
<script src="libs/header-attrs-2.1/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Time Series Analysis with R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="time-series-basics.html"><a href="time-series-basics.html"><i class="fa fa-check"></i><b>2</b> Time series basics</a>
<ul>
<li class="chapter" data-level="2.1" data-path="time-series-basics.html"><a href="time-series-basics.html#what-is-a-time-series"><i class="fa fa-check"></i><b>2.1</b> What is a Time Series</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="time-series-basics.html"><a href="time-series-basics.html#definition"><i class="fa fa-check"></i><b>2.1.1</b> Definition</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="time-series-basics.html"><a href="time-series-basics.html#time-series-exploration"><i class="fa fa-check"></i><b>2.2</b> Time Series exploration</a></li>
<li class="chapter" data-level="2.3" data-path="time-series-basics.html"><a href="time-series-basics.html#time-series-patterns"><i class="fa fa-check"></i><b>2.3</b> Time Series patterns</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="time-series-basics.html"><a href="time-series-basics.html#how-to-extract-the-trend-seasonality-and-error"><i class="fa fa-check"></i><b>2.3.1</b> How to extract the trend, seasonality and error?</a></li>
<li class="chapter" data-level="2.3.2" data-path="time-series-basics.html"><a href="time-series-basics.html#how-to-de-trend-a-time-series"><i class="fa fa-check"></i><b>2.3.2</b> How to de-trend a time series ?</a></li>
<li class="chapter" data-level="2.3.3" data-path="time-series-basics.html"><a href="time-series-basics.html#how-to-de-seasonalize-a-time-series-in-r"><i class="fa fa-check"></i><b>2.3.3</b> How to de-seasonalize a time series in R?</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="time-series-basics.html"><a href="time-series-basics.html#stationarity-in-time-series"><i class="fa fa-check"></i><b>2.4</b> Stationarity in Time Series</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="time-series-basics.html"><a href="time-series-basics.html#elementary-statistics"><i class="fa fa-check"></i><b>2.4.1</b> Elementary statistics</a></li>
<li class="chapter" data-level="2.4.2" data-path="time-series-basics.html"><a href="time-series-basics.html#stationarity-definition"><i class="fa fa-check"></i><b>2.4.2</b> Stationarity definition</a></li>
<li class="chapter" data-level="2.4.3" data-path="time-series-basics.html"><a href="time-series-basics.html#stationarity-test"><i class="fa fa-check"></i><b>2.4.3</b> Stationarity test</a></li>
<li class="chapter" data-level="2.4.4" data-path="time-series-basics.html"><a href="time-series-basics.html#make-a-time-series-stationary"><i class="fa fa-check"></i><b>2.4.4</b> Make a time series stationary</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="time-series-basics.html"><a href="time-series-basics.html#auto-correlation"><i class="fa fa-check"></i><b>2.5</b> Auto-correlation</a></li>
<li class="chapter" data-level="2.6" data-path="time-series-basics.html"><a href="time-series-basics.html#references"><i class="fa fa-check"></i><b>2.6</b> References</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="arma-time-series-modeling.html"><a href="arma-time-series-modeling.html"><i class="fa fa-check"></i><b>3</b> ARMA Time Series modeling</a>
<ul>
<li class="chapter" data-level="3.1" data-path="arma-time-series-modeling.html"><a href="arma-time-series-modeling.html#auto-regressive-time-series-model"><i class="fa fa-check"></i><b>3.1</b> Auto-Regressive Time Series model</a></li>
<li class="chapter" data-level="3.2" data-path="arma-time-series-modeling.html"><a href="arma-time-series-modeling.html#moving-average-time-series-model"><i class="fa fa-check"></i><b>3.2</b> Moving Average Time Series Model</a></li>
<li class="chapter" data-level="3.3" data-path="arma-time-series-modeling.html"><a href="arma-time-series-modeling.html#model-selection-ar-or-ma"><i class="fa fa-check"></i><b>3.3</b> Model selection: AR or MA</a></li>
<li class="chapter" data-level="3.4" data-path="arma-time-series-modeling.html"><a href="arma-time-series-modeling.html#references-1"><i class="fa fa-check"></i><b>3.4</b> References</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="time-series-forecasting.html"><a href="time-series-forecasting.html"><i class="fa fa-check"></i><b>4</b> Time Series Forecasting</a>
<ul>
<li class="chapter" data-level="4.1" data-path="time-series-forecasting.html"><a href="time-series-forecasting.html#understanding-the-context-of-forecasting"><i class="fa fa-check"></i><b>4.1</b> Understanding the context of forecasting</a></li>
<li class="chapter" data-level="4.2" data-path="time-series-forecasting.html"><a href="time-series-forecasting.html#data-preparation"><i class="fa fa-check"></i><b>4.2</b> Data preparation</a></li>
<li class="chapter" data-level="4.3" data-path="time-series-forecasting.html"><a href="time-series-forecasting.html#case-study"><i class="fa fa-check"></i><b>4.3</b> Case study</a></li>
<li class="chapter" data-level="4.4" data-path="time-series-forecasting.html"><a href="time-series-forecasting.html#performance-metrics"><i class="fa fa-check"></i><b>4.4</b> Performance metrics</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="time-series-forecasting.html"><a href="time-series-forecasting.html#forecast-errors"><i class="fa fa-check"></i><b>4.4.1</b> Forecast errors</a></li>
<li class="chapter" data-level="4.4.2" data-path="time-series-forecasting.html"><a href="time-series-forecasting.html#r-squared"><i class="fa fa-check"></i><b>4.4.2</b> R-squared</a></li>
<li class="chapter" data-level="4.4.3" data-path="time-series-forecasting.html"><a href="time-series-forecasting.html#mean-absolute-error-mse"><i class="fa fa-check"></i><b>4.4.3</b> Mean Absolute Error (MSE)</a></li>
<li class="chapter" data-level="4.4.4" data-path="time-series-forecasting.html"><a href="time-series-forecasting.html#median-absolute-error-medae"><i class="fa fa-check"></i><b>4.4.4</b> Median Absolute Error (MedAE)</a></li>
<li class="chapter" data-level="4.4.5" data-path="time-series-forecasting.html"><a href="time-series-forecasting.html#mean-squared-error-mse"><i class="fa fa-check"></i><b>4.4.5</b> Mean Squared Error (MSE)</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="time-series-forecasting.html"><a href="time-series-forecasting.html#naive-methods"><i class="fa fa-check"></i><b>4.5</b> Naive methods</a></li>
<li class="chapter" data-level="4.6" data-path="time-series-forecasting.html"><a href="time-series-forecasting.html#exponential-smoothing"><i class="fa fa-check"></i><b>4.6</b> Exponential smoothing</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="time-series-forecasting.html"><a href="time-series-forecasting.html#state-space-models"><i class="fa fa-check"></i><b>4.6.1</b> State Space Models</a></li>
<li class="chapter" data-level="4.6.2" data-path="time-series-forecasting.html"><a href="time-series-forecasting.html#double-seasonal-holt-winters"><i class="fa fa-check"></i><b>4.6.2</b> Double seasonal Holt-Winters</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="time-series-forecasting.html"><a href="time-series-forecasting.html#arimasarima-models"><i class="fa fa-check"></i><b>4.7</b> ARIMA/SARIMA models</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="outlier-detection-in-time-series.html"><a href="outlier-detection-in-time-series.html"><i class="fa fa-check"></i><b>5</b> Outlier detection in Time series</a>
<ul>
<li class="chapter" data-level="5.1" data-path="outlier-detection-in-time-series.html"><a href="outlier-detection-in-time-series.html#introduction-1"><i class="fa fa-check"></i><b>5.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="outlier-detection-in-time-series.html"><a href="outlier-detection-in-time-series.html#definition-1"><i class="fa fa-check"></i><b>5.1.1</b> Definition</a></li>
<li class="chapter" data-level="5.1.2" data-path="outlier-detection-in-time-series.html"><a href="outlier-detection-in-time-series.html#taxonomy"><i class="fa fa-check"></i><b>5.1.2</b> Taxonomy</a></li>
<li class="chapter" data-level="5.1.3" data-path="outlier-detection-in-time-series.html"><a href="outlier-detection-in-time-series.html#types-of-anomalies-in-time-series"><i class="fa fa-check"></i><b>5.1.3</b> Types of anomalies in time series</a></li>
<li class="chapter" data-level="5.1.4" data-path="outlier-detection-in-time-series.html"><a href="outlier-detection-in-time-series.html#methodological-approaches"><i class="fa fa-check"></i><b>5.1.4</b> Methodological Approaches</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="outlier-detection-in-time-series.html"><a href="outlier-detection-in-time-series.html#statistical-based-approaches"><i class="fa fa-check"></i><b>5.2</b> Statistical-based approaches</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="outlier-detection-in-time-series.html"><a href="outlier-detection-in-time-series.html#descriptive-statistics"><i class="fa fa-check"></i><b>5.2.1</b> Descriptive statistics</a></li>
<li class="chapter" data-level="5.2.2" data-path="outlier-detection-in-time-series.html"><a href="outlier-detection-in-time-series.html#statistical-tests"><i class="fa fa-check"></i><b>5.2.2</b> Statistical tests</a></li>
<li class="chapter" data-level="5.2.3" data-path="outlier-detection-in-time-series.html"><a href="outlier-detection-in-time-series.html#stl-decomposition"><i class="fa fa-check"></i><b>5.2.3</b> STL decomposition</a></li>
<li class="chapter" data-level="5.2.4" data-path="outlier-detection-in-time-series.html"><a href="outlier-detection-in-time-series.html#generalized-esd-test-for-outliers"><i class="fa fa-check"></i><b>5.2.4</b> Generalized ESD Test for Outliers</a></li>
<li class="chapter" data-level="5.2.5" data-path="outlier-detection-in-time-series.html"><a href="outlier-detection-in-time-series.html#extreme-studentized-deviate-technique-esd"><i class="fa fa-check"></i><b>5.2.5</b> Extreme Studentized Deviate Technique (ESD)</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="outlier-detection-in-time-series.html"><a href="outlier-detection-in-time-series.html#forecasting-based-approaches"><i class="fa fa-check"></i><b>5.3</b> Forecasting-based approaches</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="outlier-detection-in-time-series.html"><a href="outlier-detection-in-time-series.html#moving-average-method"><i class="fa fa-check"></i><b>5.3.1</b> Moving Average Method</a></li>
<li class="chapter" data-level="5.3.2" data-path="outlier-detection-in-time-series.html"><a href="outlier-detection-in-time-series.html#arma"><i class="fa fa-check"></i><b>5.3.2</b> ARMA</a></li>
<li class="chapter" data-level="5.3.3" data-path="outlier-detection-in-time-series.html"><a href="outlier-detection-in-time-series.html#prophet"><i class="fa fa-check"></i><b>5.3.3</b> Prophet</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="outlier-detection-in-time-series.html"><a href="outlier-detection-in-time-series.html#neural-network-based-approaches"><i class="fa fa-check"></i><b>5.4</b> Neural Network Based Approaches</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="outlier-detection-in-time-series.html"><a href="outlier-detection-in-time-series.html#autoencoder"><i class="fa fa-check"></i><b>5.4.1</b> Autoencoder</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="outlier-detection-in-time-series.html"><a href="outlier-detection-in-time-series.html#clustering-based-approaches"><i class="fa fa-check"></i><b>5.5</b> Clustering Based Approaches</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="outlier-detection-in-time-series.html"><a href="outlier-detection-in-time-series.html#kmeans"><i class="fa fa-check"></i><b>5.5.1</b> Kmeans</a></li>
<li class="chapter" data-level="5.5.2" data-path="outlier-detection-in-time-series.html"><a href="outlier-detection-in-time-series.html#gaussina-mixture-model-gmm"><i class="fa fa-check"></i><b>5.5.2</b> Gaussina Mixture Model (GMM)</a></li>
<li class="chapter" data-level="5.5.3" data-path="outlier-detection-in-time-series.html"><a href="outlier-detection-in-time-series.html#dbscan"><i class="fa fa-check"></i><b>5.5.3</b> DBSCAN</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="outlier-detection-in-time-series.html"><a href="outlier-detection-in-time-series.html#proximity-based-approaches"><i class="fa fa-check"></i><b>5.6</b> Proximity Based Approaches</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="outlier-detection-in-time-series.html"><a href="outlier-detection-in-time-series.html#k-nearest-neighbor"><i class="fa fa-check"></i><b>5.6.1</b> K-Nearest neighbor:</a></li>
<li class="chapter" data-level="5.6.2" data-path="outlier-detection-in-time-series.html"><a href="outlier-detection-in-time-series.html#local-outlier-factor-lof"><i class="fa fa-check"></i><b>5.6.2</b> Local Outlier Factor (LOF)</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="outlier-detection-in-time-series.html"><a href="outlier-detection-in-time-series.html#tree-based-approaches"><i class="fa fa-check"></i><b>5.7</b> Tree Based Approaches</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="outlier-detection-in-time-series.html"><a href="outlier-detection-in-time-series.html#isolation-forest"><i class="fa fa-check"></i><b>5.7.1</b> Isolation Forest</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="outlier-detection-in-time-series.html"><a href="outlier-detection-in-time-series.html#dimension-reduction-based-approaches"><i class="fa fa-check"></i><b>5.8</b> Dimension Reduction Based Approaches</a>
<ul>
<li class="chapter" data-level="5.8.1" data-path="outlier-detection-in-time-series.html"><a href="outlier-detection-in-time-series.html#principal-component-analyses-pca"><i class="fa fa-check"></i><b>5.8.1</b> Principal Component Analyses (PCA)</a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="outlier-detection-in-time-series.html"><a href="outlier-detection-in-time-series.html#references-2"><i class="fa fa-check"></i><b>5.9</b> References</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references-3.html"><a href="references-3.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Time Series with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="time-series-basics" class="section level1" number="2">
<h1><span class="header-section-number">Chapter 2</span> Time series basics</h1>
<div id="what-is-a-time-series" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> What is a Time Series</h2>
<div id="definition" class="section level3" number="2.1.1">
<h3><span class="header-section-number">2.1.1</span> Definition</h3>
<p>Any metric that is measured over regular time intervals makes a Time Series (examples: weather data, stock prices, census analysis, budgetary analysis…). We can define a time series as a <strong>series of data points indexed in time order</strong>. It is a sequence taken at successive equally spaecd points in time, a sequence of discrete-time data.</p>
<p>The purpose of time series analysis is generally twofold: to understand or model the stochastic mechanisms that gives rise to an observed series and to predict or forecast the future values of a series based on the history of that series</p>
</div>
</div>
<div id="time-series-exploration" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> Time Series exploration</h2>
<p>We will implement some basic operations on Time serie data. We can use <code>AirPassengers</code> preloaded dataset.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="time-series-basics.html#cb1-1" aria-hidden="true"></a><span class="kw">data</span>(AirPassengers)</span>
<span id="cb1-2"><a href="time-series-basics.html#cb1-2" aria-hidden="true"></a><span class="co"># show the class of data</span></span>
<span id="cb1-3"><a href="time-series-basics.html#cb1-3" aria-hidden="true"></a><span class="kw">class</span>(AirPassengers)</span></code></pre></div>
<pre><code>## [1] &quot;ts&quot;</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="time-series-basics.html#cb3-1" aria-hidden="true"></a><span class="co"># print data</span></span>
<span id="cb3-2"><a href="time-series-basics.html#cb3-2" aria-hidden="true"></a><span class="kw">print</span>(AirPassengers)</span></code></pre></div>
<pre><code>##      Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec
## 1949 112 118 132 129 121 135 148 148 136 119 104 118
## 1950 115 126 141 135 125 149 170 170 158 133 114 140
## 1951 145 150 178 163 172 178 199 199 184 162 146 166
## 1952 171 180 193 181 183 218 230 242 209 191 172 194
## 1953 196 196 236 235 229 243 264 272 237 211 180 201
## 1954 204 188 235 227 234 264 302 293 259 229 203 229
## 1955 242 233 267 269 270 315 364 347 312 274 237 278
## 1956 284 277 317 313 318 374 413 405 355 306 271 306
## 1957 315 301 356 348 355 422 465 467 404 347 305 336
## 1958 340 318 362 348 363 435 491 505 404 359 310 337
## 1959 360 342 406 396 420 472 548 559 463 407 362 405
## 1960 417 391 419 461 472 535 622 606 508 461 390 432</code></pre>
<ul>
<li><strong>Time series summary</strong>: We can use simple commands to show first/last dates and records frequency:</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="time-series-basics.html#cb5-1" aria-hidden="true"></a><span class="co"># show the start/end dates of the time serie data</span></span>
<span id="cb5-2"><a href="time-series-basics.html#cb5-2" aria-hidden="true"></a><span class="kw">start</span>(AirPassengers)</span></code></pre></div>
<pre><code>## [1] 1949    1</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="time-series-basics.html#cb7-1" aria-hidden="true"></a><span class="kw">end</span>(AirPassengers)</span></code></pre></div>
<pre><code>## [1] 1960   12</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="time-series-basics.html#cb9-1" aria-hidden="true"></a><span class="co"># show the data frequency</span></span>
<span id="cb9-2"><a href="time-series-basics.html#cb9-2" aria-hidden="true"></a><span class="kw">frequency</span>(AirPassengers)</span></code></pre></div>
<pre><code>## [1] 12</code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="time-series-basics.html#cb11-1" aria-hidden="true"></a><span class="co"># show summary of air passengers value</span></span>
<span id="cb11-2"><a href="time-series-basics.html#cb11-2" aria-hidden="true"></a><span class="kw">summary</span>(AirPassengers)</span></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   104.0   180.0   265.5   280.3   360.5   622.0</code></pre>
<ul>
<li><strong>Trend analysis</strong>: We can easily plot the time serie data and fit a linear model</li>
</ul>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="time-series-basics.html#cb13-1" aria-hidden="true"></a><span class="co">#This will plot the time series</span></span>
<span id="cb13-2"><a href="time-series-basics.html#cb13-2" aria-hidden="true"></a><span class="kw">ts.plot</span>(AirPassengers, </span>
<span id="cb13-3"><a href="time-series-basics.html#cb13-3" aria-hidden="true"></a>        <span class="dt">xlab=</span><span class="st">&quot;Year&quot;</span>, </span>
<span id="cb13-4"><a href="time-series-basics.html#cb13-4" aria-hidden="true"></a>        <span class="dt">ylab=</span><span class="st">&quot;Number of Passengers&quot;</span>,</span>
<span id="cb13-5"><a href="time-series-basics.html#cb13-5" aria-hidden="true"></a>        <span class="dt">main=</span><span class="st">&quot;Monthly totals of international airline passengers, 1949-1960&quot;</span>)</span>
<span id="cb13-6"><a href="time-series-basics.html#cb13-6" aria-hidden="true"></a></span>
<span id="cb13-7"><a href="time-series-basics.html#cb13-7" aria-hidden="true"></a><span class="co"># This will fit in a line</span></span>
<span id="cb13-8"><a href="time-series-basics.html#cb13-8" aria-hidden="true"></a><span class="kw">abline</span>(<span class="dt">reg=</span><span class="kw">lm</span>(AirPassengers<span class="op">~</span><span class="kw">time</span>(AirPassengers)), <span class="dt">col =</span> <span class="st">&quot;red&quot;</span>)</span></code></pre></div>
<p><img src="TimeSerieAnalysis-Book_files/figure-html/AirPassengers%20plot-1.png" width="672" /></p>
<ul>
<li><strong>Cycles</strong>: The command <code>cycle</code> gives the positions in the cycle of each observation</li>
</ul>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="time-series-basics.html#cb14-1" aria-hidden="true"></a><span class="kw">cycle</span>(AirPassengers)</span></code></pre></div>
<pre><code>##      Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec
## 1949   1   2   3   4   5   6   7   8   9  10  11  12
## 1950   1   2   3   4   5   6   7   8   9  10  11  12
## 1951   1   2   3   4   5   6   7   8   9  10  11  12
## 1952   1   2   3   4   5   6   7   8   9  10  11  12
## 1953   1   2   3   4   5   6   7   8   9  10  11  12
## 1954   1   2   3   4   5   6   7   8   9  10  11  12
## 1955   1   2   3   4   5   6   7   8   9  10  11  12
## 1956   1   2   3   4   5   6   7   8   9  10  11  12
## 1957   1   2   3   4   5   6   7   8   9  10  11  12
## 1958   1   2   3   4   5   6   7   8   9  10  11  12
## 1959   1   2   3   4   5   6   7   8   9  10  11  12
## 1960   1   2   3   4   5   6   7   8   9  10  11  12</code></pre>
<ul>
<li><strong>Aggregation</strong>: We can aggregate the cycles ad display a year on year trend</li>
</ul>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="time-series-basics.html#cb16-1" aria-hidden="true"></a><span class="kw">plot</span>(<span class="kw">aggregate</span>(AirPassengers,<span class="dt">FUN=</span>mean))</span></code></pre></div>
<p><img src="TimeSerieAnalysis-Book_files/figure-html/AirPassengers%20aggregate-1.png" width="672" /></p>
<p>Box plot across months will give us a sense on seasonal effect</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="time-series-basics.html#cb17-1" aria-hidden="true"></a><span class="kw">boxplot</span>(AirPassengers<span class="op">~</span><span class="kw">cycle</span>(AirPassengers))</span></code></pre></div>
<p><img src="TimeSerieAnalysis-Book_files/figure-html/AirPassengers%20boxplot-1.png" width="672" /></p>
<ul>
<li><strong>Components</strong>: Each data point <span class="math inline">\(Y_t\)</span> at time <span class="math inline">\(t\)</span> in a Time Series can be expressed as either a sum or a product of 3 components, namely, Seasonality (<span class="math inline">\(S_t\)</span>), Trend (<span class="math inline">\(T_t\)</span>) and Error (<span class="math inline">\(e_t\)</span>) (a.k.a White Noise).</li>
</ul>
<p>Additive Time Series:</p>
<p><span class="math inline">\(Y_t = S_t + T_t + e_t\)</span></p>
<p>Multiplicative Time Series:</p>
<p><span class="math inline">\(Y_t = S_t * T_t * e_t\)</span></p>
</div>
<div id="time-series-patterns" class="section level2" number="2.3">
<h2><span class="header-section-number">2.3</span> Time Series patterns</h2>
<ul>
<li><strong>Trend</strong>: A trend exists when there is a long-term increase or decrease in the data.</li>
<li><strong>Seasonal</strong>: A seasonal apptern occurs when a tie series is affected by seasonal factors such as the day of the week or the time of the daya. Seosonaity refers to a known frequency.</li>
<li><strong>Cyclic</strong> A cycle occurs when the data shows rises and falls that are not of a fixed frequency.</li>
</ul>
<div id="how-to-extract-the-trend-seasonality-and-error" class="section level3" number="2.3.1">
<h3><span class="header-section-number">2.3.1</span> How to extract the trend, seasonality and error?</h3>
<p>The <em>decompose()</em> and <em>forecast::stl()</em> splits the time series into seasonality, trend and error components.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="time-series-basics.html#cb18-1" aria-hidden="true"></a>tsData &lt;-<span class="st"> </span>EuStockMarkets[, <span class="dv">1</span>] <span class="co"># ts data</span></span>
<span id="cb18-2"><a href="time-series-basics.html#cb18-2" aria-hidden="true"></a>decomposedRes &lt;-<span class="st"> </span><span class="kw">decompose</span>(tsData, <span class="dt">type=</span><span class="st">&quot;mult&quot;</span>) <span class="co"># use type = &quot;additive&quot; for additive components</span></span>
<span id="cb18-3"><a href="time-series-basics.html#cb18-3" aria-hidden="true"></a><span class="kw">plot</span> (decomposedRes) <span class="co"># see plot below</span></span></code></pre></div>
<p><img src="TimeSerieAnalysis-Book_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="time-series-basics.html#cb19-1" aria-hidden="true"></a>stlRes &lt;-<span class="st"> </span><span class="kw">stl</span>(tsData, <span class="dt">s.window =</span> <span class="st">&quot;periodic&quot;</span>)</span></code></pre></div>
</div>
<div id="how-to-de-trend-a-time-series" class="section level3" number="2.3.2">
<h3><span class="header-section-number">2.3.2</span> How to de-trend a time series ?</h3>
<p>Use linear regression to model the Time Series data with linear indices (Ex: 1, 2, .. n). The resulting model’s residuals is a representation of the time series devoid of the trend.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="time-series-basics.html#cb20-1" aria-hidden="true"></a>trModel &lt;-<span class="st"> </span><span class="kw">lm</span>(JohnsonJohnson <span class="op">~</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(JohnsonJohnson)))</span>
<span id="cb20-2"><a href="time-series-basics.html#cb20-2" aria-hidden="true"></a><span class="kw">plot</span>(<span class="kw">resid</span>(trModel), <span class="dt">type=</span><span class="st">&quot;l&quot;</span>)  <span class="co"># resid(trModel) contains the de-trended series.</span></span></code></pre></div>
<p><img src="TimeSerieAnalysis-Book_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
</div>
<div id="how-to-de-seasonalize-a-time-series-in-r" class="section level3" number="2.3.3">
<h3><span class="header-section-number">2.3.3</span> How to de-seasonalize a time series in R?</h3>
<p>De-seasonalizing throws insight about the seasonal pattern in the time series and helps to model the data without the seasonal effects. In order to de-seasonalize a time series we need to de-compose first the time series using <em>forecast::stl()</em> , and then use <em>seasadj()</em> from <em>forecast package</em></p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="time-series-basics.html#cb21-1" aria-hidden="true"></a><span class="kw">library</span>(forecast)</span></code></pre></div>
<pre><code>## Registered S3 method overwritten by &#39;quantmod&#39;:
##   method            from
##   as.zoo.data.frame zoo</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="time-series-basics.html#cb23-1" aria-hidden="true"></a>ts.stl &lt;-<span class="st"> </span><span class="kw">stl</span>(tsData ,<span class="st">&quot;periodic&quot;</span>)  <span class="co"># decompose the TS</span></span>
<span id="cb23-2"><a href="time-series-basics.html#cb23-2" aria-hidden="true"></a>ts.sa &lt;-<span class="st"> </span><span class="kw">seasadj</span>(ts.stl)  <span class="co"># de-seasonalize</span></span>
<span id="cb23-3"><a href="time-series-basics.html#cb23-3" aria-hidden="true"></a><span class="kw">plot</span>(AirPassengers, <span class="dt">type=</span><span class="st">&quot;l&quot;</span>)  <span class="co"># original series</span></span></code></pre></div>
<p><img src="TimeSerieAnalysis-Book_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="time-series-basics.html#cb24-1" aria-hidden="true"></a><span class="kw">plot</span>(ts.sa, <span class="dt">type=</span><span class="st">&quot;l&quot;</span>)  <span class="co"># seasonal adjusted</span></span></code></pre></div>
<p><img src="TimeSerieAnalysis-Book_files/figure-html/unnamed-chunk-3-2.png" width="672" /></p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="time-series-basics.html#cb25-1" aria-hidden="true"></a><span class="kw">seasonplot</span>(ts.sa, <span class="dv">12</span>, <span class="dt">col=</span><span class="kw">rainbow</span>(<span class="dv">12</span>), <span class="dt">year.labels=</span><span class="ot">TRUE</span>, <span class="dt">main=</span><span class="st">&quot;Seasonal plot: Airpassengers&quot;</span>) <span class="co"># seasonal frequency set as 12 for monthly data.</span></span></code></pre></div>
<p><img src="TimeSerieAnalysis-Book_files/figure-html/unnamed-chunk-3-3.png" width="672" /></p>
</div>
</div>
<div id="stationarity-in-time-series" class="section level2" number="2.4">
<h2><span class="header-section-number">2.4</span> Stationarity in Time Series</h2>
<div id="elementary-statistics" class="section level3" number="2.4.1">
<h3><span class="header-section-number">2.4.1</span> Elementary statistics</h3>
<p>Before defining auto-correlation in Time Series analysis, we will introduce some basic concepts necessary to understand statical modeling of time series objects.</p>
<ul>
<li><strong>Expectation</strong>: The expectation (<span class="math inline">\(E(x)\)</span>) of a random variable <span class="math inline">\(x\)</span> is its mean average value in the population. We denote the expectation of <span class="math inline">\(x\)</span> by <span class="math inline">\(\mu\)</span> such that <span class="math inline">\(E(x) = \mu\)</span></li>
<li><strong>Variance</strong>: The variance of a random variable is the expectation of the squared deviations of the variable from the mean, denoted by <span class="math inline">\(\sigma^2(x) = E[(x-\mu)^2]\)</span></li>
<li><strong>Standard Deviation</strong>: The standard deviation of a random variable <span class="math inline">\(x\)</span>, <span class="math inline">\(\sigma(x)\)</span>, is the square root of the variance of x.</li>
<li><strong>Covariance</strong>: Covariance tells us how lineary related are two random variables. Given two random variables <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> with repsective expectations <span class="math inline">\(\mu_x\)</span> and <span class="math inline">\(\mu_y\)</span>, the covariance is <span class="math inline">\(\sigma(x,y) = E[(x-\mu_x)(y-\mu_y)]\)</span>. In statstical situation, we should estimate the covariance from a sample of population. Therefore we use the sample means <span class="math inline">\(\overline{x}\)</span> and <span class="math inline">\(\overline{y}\)</span>. The sample covariance is calculated as follow:</li>
</ul>
<p><span class="math display">\[Cov(x,y) = \frac{1}{n-1} \sum_{i = 1}^{n} (x_i - \overline{x})(y_i - \overline{y})\]</span></p>
<p>Let’s generate two random variables and calculate their covariance:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="time-series-basics.html#cb26-1" aria-hidden="true"></a><span class="kw">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb26-2"><a href="time-series-basics.html#cb26-2" aria-hidden="true"></a>x &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">1</span>,<span class="dv">100</span>) <span class="op">+</span><span class="st"> </span><span class="fl">20.0</span><span class="op">*</span><span class="kw">rnorm</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>)</span>
<span id="cb26-3"><a href="time-series-basics.html#cb26-3" aria-hidden="true"></a><span class="kw">set.seed</span>(<span class="dv">2</span>)</span>
<span id="cb26-4"><a href="time-series-basics.html#cb26-4" aria-hidden="true"></a>y &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">1</span>,<span class="dv">100</span>) <span class="op">+</span><span class="st"> </span><span class="fl">20.0</span><span class="op">*</span><span class="kw">rnorm</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>)</span>
<span id="cb26-5"><a href="time-series-basics.html#cb26-5" aria-hidden="true"></a><span class="kw">plot</span>(x,y)</span></code></pre></div>
<p><img src="TimeSerieAnalysis-Book_files/figure-html/covariance-1.png" width="672" /></p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="time-series-basics.html#cb27-1" aria-hidden="true"></a><span class="kw">cov</span>(x,y)</span></code></pre></div>
<pre><code>## [1] 681.6859</code></pre>
<ul>
<li><strong>Correlation</strong>:
As opposite to covariance, correlation is a dimensionless measure of how two variabes vary together. It consists of “covariance” of two random variables normalized by their respective spreads.</li>
</ul>
<p><span class="math display">\[Cor(x,y) = \frac{Cov(x,y)}{\sigma(x)\sigma(y)}\]</span></p>
<p>When <span class="math inline">\(Cor(x,y) = 1\)</span>, it means exact positive linear association. When <span class="math inline">\(Cor(x,y) = 1\)</span>, it shows no linear association at all and when <span class="math inline">\(Cor(x,y) = -1\)</span>, it indicates exact negative linear asssociation.
Let’s calculate the correlation of the previous vectors <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span>:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="time-series-basics.html#cb29-1" aria-hidden="true"></a><span class="kw">cor</span>(x,y)</span></code></pre></div>
<pre><code>## [1] 0.5796604</code></pre>
</div>
<div id="stationarity-definition" class="section level3" number="2.4.2">
<h3><span class="header-section-number">2.4.2</span> Stationarity definition</h3>
<p>There are three main critera for considering a series as stationary:</p>
<ul>
<li><p>The mean of the series should not be a function of time but should be a constant. We consider a time series as stationary in the mean if <span class="math inline">\(\mu(t) = \mu\)</span>, a constant.</p></li>
<li><p>The variance of the series should not be a function of time. This property is called: <em>homoscedasticity</em>. Hence, a time series is stationary in the variance if <span class="math inline">\(\sigma^2(t) =\sigma^2\)</span>, a constant.</p></li>
<li><p>The covariance of <span class="math inline">\(x(i)\)</span> and <span class="math inline">\(x(i+m)\)</span> should not be a function of time.</p></li>
<li><p><strong>Second order stationary</strong>: A time series is <em>second order stationary</em> if the correlation between sequential observations is only a function of the lag (the number of time steps seperating each sequential observation).</p></li>
</ul>
<p>There are various techniques to bring stationarity to a non-stationay time series:</p>
<ul>
<li>Detrending: Removing the trend component from the time series by using <span class="math inline">\(log()\)</span></li>
<li>Diffrencing: Modeling the differences of the terms instead of actual terms</li>
</ul>
</div>
<div id="stationarity-test" class="section level3" number="2.4.3">
<h3><span class="header-section-number">2.4.3</span> Stationarity test</h3>
<p>In order to test the stationarity of a time series, we can use the <strong>Augmented Dickey-Fuller Test</strong> (adf test). A p-Value of less than 0.05 in <em>adf.test()</em> indicates that the time series is stationary.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="time-series-basics.html#cb31-1" aria-hidden="true"></a><span class="kw">library</span>(tseries)</span>
<span id="cb31-2"><a href="time-series-basics.html#cb31-2" aria-hidden="true"></a>tsData &lt;-<span class="st"> </span>EuStockMarkets[, <span class="dv">1</span>] <span class="co"># ts data</span></span>
<span id="cb31-3"><a href="time-series-basics.html#cb31-3" aria-hidden="true"></a><span class="kw">adf.test</span>(tsData) <span class="co"># p-value &lt; 0.05 indicates the TS is stationary</span></span></code></pre></div>
<pre><code>## 
##  Augmented Dickey-Fuller Test
## 
## data:  tsData
## Dickey-Fuller = -0.82073, Lag order = 12, p-value = 0.9598
## alternative hypothesis: stationary</code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="time-series-basics.html#cb33-1" aria-hidden="true"></a><span class="kw">kpss.test</span>(tsData)</span></code></pre></div>
<pre><code>## Warning in kpss.test(tsData): p-value smaller than printed p-value</code></pre>
<pre><code>## 
##  KPSS Test for Level Stationarity
## 
## data:  tsData
## KPSS Level = 15.401, Truncation lag parameter = 8, p-value = 0.01</code></pre>
</div>
<div id="make-a-time-series-stationary" class="section level3" number="2.4.4">
<h3><span class="header-section-number">2.4.4</span> Make a time series stationary</h3>
<ul>
<li><strong>Differencing</strong>: Differencing a time series means, to subtract each data point in the series from its successor. It is commonly used to make a time series stationary. For most time series patterns, 1 or 2 differencing is necessary to make it a stationary series.</li>
</ul>
<p>But if the time series appears to be seasonal, a better approach is to difference with respective season’s data points to remove seasonal effect. After that, if needed, difference it again with successive data points.
But, How to know how many differencing is needed?
The <em>nsdiffs</em> and <em>ndiffs</em> from <em>forecast package</em> can help find out how many seasonal differencing and regular differencing respectively is needed to make the series stationary.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="time-series-basics.html#cb36-1" aria-hidden="true"></a><span class="kw">library</span>(tseries)</span>
<span id="cb36-2"><a href="time-series-basics.html#cb36-2" aria-hidden="true"></a><span class="kw">library</span>(forecast)</span>
<span id="cb36-3"><a href="time-series-basics.html#cb36-3" aria-hidden="true"></a><span class="co"># Seasonal Differencing</span></span>
<span id="cb36-4"><a href="time-series-basics.html#cb36-4" aria-hidden="true"></a><span class="kw">nsdiffs</span>(AirPassengers)  <span class="co"># number for seasonal differencing needed</span></span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="time-series-basics.html#cb38-1" aria-hidden="true"></a><span class="co">#&gt; 1</span></span>
<span id="cb38-2"><a href="time-series-basics.html#cb38-2" aria-hidden="true"></a>AirPassengers_seasdiff &lt;-<span class="st"> </span><span class="kw">diff</span>(AirPassengers, <span class="dt">lag=</span><span class="kw">frequency</span>(AirPassengers), <span class="dt">differences=</span><span class="dv">1</span>)  <span class="co"># seasonal differencing</span></span>
<span id="cb38-3"><a href="time-series-basics.html#cb38-3" aria-hidden="true"></a><span class="kw">plot</span>(AirPassengers_seasdiff, <span class="dt">type=</span><span class="st">&quot;l&quot;</span>, <span class="dt">main=</span><span class="st">&quot;Seasonally Differenced&quot;</span>)  <span class="co"># still not stationary!</span></span></code></pre></div>
<p><img src="TimeSerieAnalysis-Book_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="time-series-basics.html#cb39-1" aria-hidden="true"></a><span class="co"># Make it stationary</span></span>
<span id="cb39-2"><a href="time-series-basics.html#cb39-2" aria-hidden="true"></a><span class="kw">ndiffs</span>(AirPassengers_seasdiff)  <span class="co"># number of differences need to make it stationary</span></span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="time-series-basics.html#cb41-1" aria-hidden="true"></a><span class="co">#&gt; 1 </span></span>
<span id="cb41-2"><a href="time-series-basics.html#cb41-2" aria-hidden="true"></a>stationaryTS &lt;-<span class="st"> </span><span class="kw">diff</span>(AirPassengers_seasdiff, <span class="dt">differences=</span> <span class="dv">1</span>)</span>
<span id="cb41-3"><a href="time-series-basics.html#cb41-3" aria-hidden="true"></a><span class="kw">plot</span>(stationaryTS, <span class="dt">type=</span><span class="st">&quot;l&quot;</span>, <span class="dt">main=</span><span class="st">&quot;Differenced and Stationary&quot;</span>)  </span></code></pre></div>
<p><img src="TimeSerieAnalysis-Book_files/figure-html/unnamed-chunk-5-2.png" width="672" /></p>
</div>
</div>
<div id="auto-correlation" class="section level2" number="2.5">
<h2><span class="header-section-number">2.5</span> Auto-correlation</h2>
<p>Autocorrelations or lagged correlations are used to know whether a time series is dependant on its past (how sequential observations in a time series affect each other). For a time series <span class="math inline">\(x\)</span> of length <span class="math inline">\(n\)</span> we consider the <span class="math inline">\(n-1\)</span> pairs of observations one time unit apart. The <span class="math inline">\(lag-1\)</span> autocorrelation of <span class="math inline">\(x\)</span> can be estimated as the sample correlation of these <span class="math inline">\([x_{t},x_{t-1}]\)</span> pairs.</p>
<ul>
<li><strong>Auto-covariance of a Time Series</strong>: If a time series is second order stationary then the autocovariance, of lag <em>k</em>, <span class="math inline">\(C_k = E[(x_{t} - \mu)(x_{t+k} - \mu)]\)</span>. The autocovariance <span class="math inline">\(C_k\)</span> is not a function of time.</li>
</ul>
<p><span class="math display">\[C_k = \frac{1}{n} \sum_{t = 1}^{n-k} (x_t - \overline{x})(x_{t+k} - \overline{x})\]</span></p>
<ul>
<li><strong>Auto-correlation of a Time Series</strong>: The auto-correlation of lag <span class="math inline">\(k\)</span> of a second order stationaru time series is given by the autocovariance of the series normalized by the product od spread.</li>
</ul>
<p><span class="math display">\[r_k = \frac{C_k}{C_0}\]</span></p>
<ul>
<li><strong>The correolgram</strong>: A correlogramn is a plot of the autocorrelation function for sequential values of lag <span class="math inline">\(k = 0,1,...,n\)</span>. It shows the correlation structure in each lag. We can use the command <code>acf</code> to plot a correlogram. Here are some examples of correlograms fir simulated time series:</li>
</ul>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="time-series-basics.html#cb42-1" aria-hidden="true"></a>w &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">1</span>, <span class="dv">100</span>)</span>
<span id="cb42-2"><a href="time-series-basics.html#cb42-2" aria-hidden="true"></a>w</span></code></pre></div>
<pre><code>##   [1]   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17  18
##  [19]  19  20  21  22  23  24  25  26  27  28  29  30  31  32  33  34  35  36
##  [37]  37  38  39  40  41  42  43  44  45  46  47  48  49  50  51  52  53  54
##  [55]  55  56  57  58  59  60  61  62  63  64  65  66  67  68  69  70  71  72
##  [73]  73  74  75  76  77  78  79  80  81  82  83  84  85  86  87  88  89  90
##  [91]  91  92  93  94  95  96  97  98  99 100</code></pre>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="time-series-basics.html#cb44-1" aria-hidden="true"></a><span class="kw">acf</span>(w)</span></code></pre></div>
<p><img src="TimeSerieAnalysis-Book_files/figure-html/acf%20seq-1.png" width="672" /></p>
<p>We notice that the ACF plot decreases in an almost linear way as the lags increase.A correlogram of this type is clear indication of a trend.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="time-series-basics.html#cb45-1" aria-hidden="true"></a>w &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="dv">10</span>)</span>
<span id="cb45-2"><a href="time-series-basics.html#cb45-2" aria-hidden="true"></a>w</span></code></pre></div>
<pre><code>##   [1]  1  2  3  4  5  6  7  8  9 10  1  2  3  4  5  6  7  8  9 10  1  2  3  4  5
##  [26]  6  7  8  9 10  1  2  3  4  5  6  7  8  9 10  1  2  3  4  5  6  7  8  9 10
##  [51]  1  2  3  4  5  6  7  8  9 10  1  2  3  4  5  6  7  8  9 10  1  2  3  4  5
##  [76]  6  7  8  9 10  1  2  3  4  5  6  7  8  9 10  1  2  3  4  5  6  7  8  9 10</code></pre>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="time-series-basics.html#cb47-1" aria-hidden="true"></a><span class="kw">acf</span>(w)</span></code></pre></div>
<p><img src="TimeSerieAnalysis-Book_files/figure-html/acf%20rep-1.png" width="672" /></p>
<p>We can see that at lag 10 and 20 there are significant peaks because sequneces are repeating with a period of 10. We see that there is a negative correlation at lags 5 and 15 of -0,5. It is characteristics of sesonal time series.</p>
</div>
<div id="references" class="section level2" number="2.6">
<h2><span class="header-section-number">2.6</span> References</h2>
<ul>
<li><a href="https://blogs.rstudio.com/ai/posts/2018-06-25-sunspots-lstm/" class="uri">https://blogs.rstudio.com/ai/posts/2018-06-25-sunspots-lstm/</a></li>
<li><a href="http://rwanjohi.rbind.io/2018/04/05/time-series-forecasting-using-lstm-in-r/" class="uri">http://rwanjohi.rbind.io/2018/04/05/time-series-forecasting-using-lstm-in-r/</a></li>
<li><a href="https://www.tensorflow.org/tutorials/structured_data/time_series" class="uri">https://www.tensorflow.org/tutorials/structured_data/time_series</a></li>
<li><a href="https://machinelearningmastery.com/time-series-forecasting-long-short-term-memory-network-python/" class="uri">https://machinelearningmastery.com/time-series-forecasting-long-short-term-memory-network-python/</a></li>
<li><a href="https://machinelearningmastery.com/time-series-prediction-lstm-recurrent-neural-networks-python-keras/" class="uri">https://machinelearningmastery.com/time-series-prediction-lstm-recurrent-neural-networks-python-keras/</a></li>
<li><a href="https://www.quantstart.com/articles/Serial-Correlation-in-Time-Series-Analysis/" class="uri">https://www.quantstart.com/articles/Serial-Correlation-in-Time-Series-Analysis/</a></li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="arma-time-series-modeling.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["TimeSerieAnalysis-Book.pdf", "TimeSerieAnalysis-Book.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
